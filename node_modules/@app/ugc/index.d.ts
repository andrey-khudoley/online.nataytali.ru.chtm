import {
  UgcListUgcFilesOptions,
  UgcUgcFileFull,
  UgcUgcFileListItem,
  UgcUgcFilePermission,
  UgcUgcFilePermissionSubjectType,
} from 'services/ugc-runner/runtime/runtimeTypes'
import { JSONInputObject } from 'utils/types'

declare type UgcFileStorage = 'cgs' | 'db'
declare type EntityPermissionSubjectType = 'user'
export declare function findUgcFile(ctx: RichUgcCtx, path: string): Promise<UgcUgcFileFull | null>
export declare function findUgcFile(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  path: string,
): Promise<UgcUgcFileFull | null>
export declare function findUgcFileById(ctx: RichUgcCtx, id: string): Promise<UgcUgcFileFull | null>
/**
 * @deprecated use `updateUgcFile(ctx, path, { code: '' })`
 */
export declare function updateUgcFileSource(ctx: RichUgcCtx, path: string, source: string): Promise<UgcUgcFileFull>
export declare function listUgcFiles<Options extends string | string[] | UgcListUgcFilesOptions>(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  options?: Options,
): Promise<{
  files: Array<
    UgcUgcFileListItem &
      (Options extends {
        includeSource: true
      }
        ? {
            source: string
          }
        : {})
  >
}>
export declare function ensureUgcDirectory(ctx: RichUgcCtx, path: string): Promise<void>
export declare function updateUgcFile(
  ctx: RichUgcCtx,
  path: string,
  update: {
    source?: string
    params?: JSONInputObject
  },
): Promise<UgcUgcFileFull>
export declare function updateUgcFilesMulti(
  _ctx: RichUgcCtx,
  updates: Record<
    string,
    | {
        type?: 'createOrUpdate'
        source?: string
      }
    | {
        type: 'delete'
      }
  >,
): Promise<Record<string, UgcUgcFileFull>>
export declare function deleteUgcFile(ctx: RichUgcCtx, path: string): Promise<void>
export declare function deleteUgcDirectoryRecursive(ctx: RichUgcCtx, path: string): Promise<void>
export declare function listUgcFilePermissions(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  path: string,
): Promise<UgcUgcFilePermission[]>
export declare function hasUgcFilePermission(
  ctx: RichUgcCtx,
  loadFrom: UgcFileStorage,
  path: string,
  userId: string,
): Promise<boolean>
export declare function createOrUpdateUgcFilePermission(
  ctx: RichUgcCtx,
  path: string,
  subjectType: UgcUgcFilePermissionSubjectType,
  subjectId: string | null,
  canRead: boolean,
): Promise<UgcUgcFilePermission>
export declare function deleteUgcFilePermission(
  ctx: RichUgcCtx,
  path: string,
  subjectType: UgcUgcFilePermissionSubjectType,
  subjectId: string | null,
): Promise<void>
export declare type UgcFilePermission = UgcUgcFilePermission
export declare type UgcFile = UgcUgcFileFull
export declare type UgcFileListItem = UgcUgcFileListItem

export {}
